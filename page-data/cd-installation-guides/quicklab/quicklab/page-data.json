{"componentChunkName":"component---src-templates-doc-js","path":"/cd-installation-guides/quicklab/quicklab","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"mdx":{"id":"953dd48e-f185-5717-986d-229238c3df07","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"Quicklab\"), mdx(\"h2\", null, \"Set up a new Quicklab cluster\"), mdx(\"ol\", {\n    \"className\": \"pf-c-list\"\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Go to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://quicklab.upshift.redhat.com/\"\n  }), \"https://quicklab.upshift.redhat.com/\"), \" and log in (top right corner)\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"New cluster\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"openshift4upi\"), \" template and a region you like the most, then select the reservation duration, the rest can be left as is:\\n\", mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"../assets/images/quicklab/template_select.png\",\n    \"alt\": \"Select a template\"\n  })))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Go to cluster page by clicking on the cluster name in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"My clusters\"), \" table\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Once the cluster reaches \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Active\"), \" state your cluster history should look like this:\\n\", mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"../assets/images/quicklab/cluster_log_1.png\",\n    \"alt\": \"Cluster is active for the first time\"\n  })))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Now click on \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"New Bundle\"), \" button in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Product information\"), \" section\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"openshift4upi\"), \" bundle. A new form loads - you can keep all the values as they are (you can ignore the warning on top as well, since this is the first install attempt of Openshift on that cluster):\\n\", mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"../assets/images/quicklab/bundle_select.png\",\n    \"alt\": \"Select a bundle\"\n  })))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Wait for OCP4 to install. After successful installation you should see a cluster history log like this:\\n\", mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"../assets/images/quicklab/cluster_log_2.png\",\n    \"alt\": \"Cluster log after OCP4 install\"\n  })))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Use the link and credentials from the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Cluster Information\"), \" section to access your cluster.\\n\", mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"../assets/images/quicklab/cluster_information.png\",\n    \"alt\": \"Cluster information\"\n  })))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Login as the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"kubeadmin\"), \", take the value from \\u201CHosts\\u201D and port 6443.\\\\\\nFor example:\"), mdx(\"div\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"sh\"\n  }), mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-sh\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"oc login upi-0.tcoufaltest.lab.upshift.rdu2.redhat.com:6443\"))))), mdx(\"h2\", null, \"Install Argo CD on your cluster\"), mdx(\"ol\", {\n    \"className\": \"pf-c-list\"\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"kube:admin is not supported in user api, therefore you have to create additional user. Simplest way is to deploy an Oauth via Htpasswd:\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Create a htpasswd config file and deploy it to OpenShift:\"), mdx(\"div\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"sh\"\n  }), mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-sh\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"$ htpasswd -nb username password > oc.htpasswd\\n$ oc create secret generic htpass-secret --from-file=htpasswd=oc.htpasswd -n openshift-config\\n$ cat <<EOF | oc apply -f -\\napiVersion: config.openshift.io/v1\\nkind: OAuth\\nmetadata:\\n  name: cluster\\nspec:\\n  identityProviders:\\n  - name: my_htpasswd_provider\\n    mappingMethod: claim\\n    type: HTPasswd\\n    htpasswd:\\n      fileData:\\n        name: htpass-secret\\nEOF\")))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Grant the new user admin cluster-admin rights\"), mdx(\"div\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"sh\"\n  }), mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-sh\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"oc adm policy add-cluster-role-to-user cluster-admin username\")))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Now log out and log in using the htpasswd provider (the new username). Generate new API token and login via this token on your local CLI\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Now you can follow the upstream docs. Create the projects:\"), mdx(\"div\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"sh\"\n  }), mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-sh\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"oc new-project argocd-test\\noc new-project aicoe-argocd-dev\")))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"And deploy\"), mdx(\"div\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"sh\"\n  }), mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-sh\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"$ kustomize build manifests/crds --enable_alpha_plugins | oc apply -f -\\ncustomresourcedefinition.apiextensions.k8s.io/applications.argoproj.io created\\ncustomresourcedefinition.apiextensions.k8s.io/appprojects.argoproj.io created\\nclusterrole.rbac.authorization.k8s.io/argocd-events-create-aggregate-to-admin created\\nclusterrole.rbac.authorization.k8s.io/argocd-proj-apps-aggregate-to-admin created\\n\\n$ kustomize build manifests/overlays/dev --enable_alpha_plugins | oc apply -f -\\nserviceaccount/argocd-application-controller created\\nserviceaccount/argocd-dex-server created\\nserviceaccount/argocd-manager created\\nserviceaccount/argocd-server created\\nrole.rbac.authorization.k8s.io/argocd-application-controller created\\nrole.rbac.authorization.k8s.io/argocd-dex-server created\\nrole.rbac.authorization.k8s.io/argocd-server created\\nclusterrole.rbac.authorization.k8s.io/argocd-manager-role created\\nrolebinding.rbac.authorization.k8s.io/argocd-application-controller created\\nrolebinding.rbac.authorization.k8s.io/argocd-dex-server created\\nrolebinding.rbac.authorization.k8s.io/argocd-server created\\nclusterrolebinding.rbac.authorization.k8s.io/argocd-manager-role-binding created\\nconfigmap/argocd-cm created\\nconfigmap/argocd-rbac-cm created\\nconfigmap/argocd-ssh-known-hosts-cm created\\nconfigmap/argocd-tls-certs-cm created\\nsecret/argocd-dex-server-oauth-token created\\nsecret/argocd-secret created\\nsecret/dev-cluster-spec created\\nsecret/ksops-pgp-key created\\nservice/argocd-dex-server created\\nservice/argocd-metrics created\\nservice/argocd-redis created\\nservice/argocd-repo-server created\\nservice/argocd-server created\\nservice/argocd-server-metrics created\\ndeployment.apps/argocd-application-controller created\\ndeployment.apps/argocd-dex-server created\\ndeployment.apps/argocd-redis created\\ndeployment.apps/argocd-repo-server created\\ndeployment.apps/argocd-server created\\nappproject.argoproj.io/dev created\\napplication.argoproj.io/dev-app created\\nroute.route.openshift.io/argocd-metrics created\\nroute.route.openshift.io/argocd-server created\\nroute.route.openshift.io/argocd-server-metrics created\\n\\n$ examples/configure_development.sh\\nserviceaccount/argocd-dex-server patched\\nsecret/argocd-secret patched\\nconfigmap/argocd-cm replaced\\nsecret/dev-cluster-spec patched\\nsecret/dev-cluster-spec patched\\napplication.argoproj.io/dev-app replaced\\ngroup.user.openshift.io/dev-group created\\ngroup.user.openshift.io/dev-group added: \\\"username\\\"\"))))));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"","description":null}}},"pageContext":{"id":"953dd48e-f185-5717-986d-229238c3df07","slug":"quicklab/quicklab"}},"staticQueryHashes":["117426894","3000541721","3753692419"]}